<docs lang="md">
<!-- zh-CN -->

### ä½¿ç”¨è¯´æ˜

#### å±æ€§è¯´æ˜

**`ratio`**: å›¾ç‰‡å®½é«˜æ¯”æ§åˆ¶

- é€šè¿‡ `padding-top` ç™¾åˆ†æ¯”å®ç°å®½é«˜æ¯”
- å­å…ƒç´ ä½¿ç”¨ `absolute` å®šä½å¡«å……å®¹å™¨ã€‚è¿™ä¼šè¦†ç›– `<img>` å…ƒç´ çš„å›ºæœ‰å®½é«˜æ¯”ç‰¹æ€§
- åŸºäºä»¥ä¸Šä¸¤ç‚¹å¿…è¦æ—¶æ˜¾å¼è®¾ç½®å®¹å™¨å®½åº¦ï¼Œå¦åˆ™å®¹å™¨å®½é«˜å¯èƒ½åå¡Œä¸º 0ï¼Œå¯¼è‡´å›¾ç‰‡æ— æ³•æ˜¾ç¤º

**`fit`**: å›¾ç‰‡å¡«å……æ¨¡å¼ï¼ˆé»˜è®¤ï¼š`contain`ï¼‰

- `background=false` æ—¶ï¼ˆä½¿ç”¨ `<img>` æ ‡ç­¾ï¼‰ï¼š
  - é€šè¿‡ [object-fit](https://developer.mozilla.org/zh-CN/docs/Web/CSS/object-fit) æ§åˆ¶
  - å¯é€‰å€¼ï¼š`cover` | `contain` | `fill` | `none` | `scale-down`
- `background=true` æ—¶ï¼ˆä½¿ç”¨èƒŒæ™¯å›¾ï¼‰ï¼š
  - é€šè¿‡ [background-size](https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-size) æ§åˆ¶
  - å¯é€‰å€¼ï¼š`cover` | `contain` | `auto` | `<length>` | `<percentage>`
  - ç¤ºä¾‹ï¼š`fit="100% 80%"` å¯è®¾ç½®è‡ªå®šä¹‰èƒŒæ™¯å›¾å°ºå¯¸
  - æ³¨æ„ï¼šç”±äºä¸å†ä½¿ç”¨ `<img>` æ ‡ç­¾æ¸²æŸ“ï¼Œå¯èƒ½å¯¼è‡´å®½é«˜å¡Œé™·

**`hoverable`**: æ‚¬åœæ”¾å¤§æ•ˆæœ

- è‡ªåŠ¨ç”Ÿæ•ˆåœºæ™¯ï¼ˆæ— éœ€æ˜¾å¼è®¾ç½®è¯¥å±æ€§ï¼‰ï¼š
  - `href` å­˜åœ¨æ—¶ï¼ˆé“¾æ¥è·³è½¬ï¼‰
  - `preview=true`ï¼ˆå›¾ç‰‡é¢„è§ˆï¼‰
  - `videoPoster=true`ï¼ˆè§†é¢‘æµ·æŠ¥ï¼‰
- å½“éœ€è¦**ç‹¬ç«‹æ§åˆ¶**æ‚¬åœæ•ˆæœæ—¶ä½¿ç”¨

**`preview`**: ç‚¹å‡»é¢„è§ˆåŠŸèƒ½ï¼Œå¯ç”¨åä¼šæ¥ç®¡ç‚¹å‡»äº‹ä»¶ï¼ˆæ˜¾ç¤ºå…¨å±é¢„è§ˆå±‚ï¼‰

**`previewClose`**: é¢„è§ˆå…³é—­æ–¹å¼

- å¯é€‰å€¼ï¼š
  - `'none'`ï¼šç¦ç”¨å…³é—­
  - `'mask'`ï¼šç‚¹å‡»é®ç½©å±‚å…³é—­
  - `'button'`ï¼šç‚¹å‡»å…³é—­æŒ‰é’®
  - `'body'`ï¼šç‚¹å‡»é¢„è§ˆå›¾ç‰‡å…³é—­
- ç»„åˆæ¨¡å¼ï¼šæ”¯æŒæ•°ç»„é…ç½®ï¼ˆå¦‚ `['mask','button']`ï¼‰
- é»˜è®¤å€¼ï¼š
  - ğŸ“± Pad ç«¯ï¼ˆè§†å£ < 1200px çš„è§¦å±è®¾å¤‡ï¼‰ï¼š`['mask','button']`
  - ğŸ’» PC ç«¯ï¼š`['mask','button','body']`

**`href`**: é“¾æ¥è·³è½¬

- å¯ç”¨åç»„ä»¶æ¸²æŸ“ä¸º `<a>` æ ‡ç­¾
- è¡Œä¸ºï¼šç‚¹å‡»æ‰§è¡Œé¡µé¢è·³è½¬

#### äº’æ–¥å±æ€§å†²çª

`preview`, `href` **ç¦æ­¢åŒæ—¶å¯ç”¨**ï¼ˆä¸¤è€…å‡ä¼šæ¥ç®¡ç‚¹å‡»äº‹ä»¶ï¼‰

<!-- en-US -->

### Usage Instructions

#### Property Description

**`ratio`**: Controls the aspect ratio of the image

- Achieved via `padding-top` percentage
- Child elements use `absolute` positioning to fill the container.
  This overrides the intrinsic aspect ratio characteristics of the `<img>` element.
- Based on the above two points, explicitly set the container width when necessary.
  Otherwise, the container's width and height may collapse to 0, causing the image to fail to display.

**`fit`**: Image fill mode (Default: `contain`)

- When `background=false` (uses `<img>` tag):
  - Controlled via [object-fit](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)
  - Optional values: `cover` | `contain` | `fill` | `none` | `scale-down`
- When `background=true` (uses background image):
  - Controlled via [background-size](https://developer.mozilla.org/en-US/docs/Web/CSS/background-size)
  - Optional values: `cover` | `contain` | `auto` | `<length>` | `<percentage>`
  - Example: `fit="100% 80%"` can be used to set a custom background image size
  - Note: Since the `<img>` tag is no longer used for rendering, this may cause width and height collapse.

**`hoverable`**: Hover zoom effect

- Automatically enabled scenarios (no need to explicitly set this property):
  - When `href` is present (link navigation)
  - When `preview=true` (image preview)
  - When `videoPoster=true` (video poster)
- Use when you need to **independently control** the hover effect.

**`preview`**: Click-to-preview functionality. When enabled, it takes over the click event (displays a full-screen preview layer).

**`previewClose`**: Preview close method

- Optional values:
  - `'none'`: Disable closing
  - `'mask'`: Click the mask layer to close
  - `'button'`: Click the close button
  - `'body'`: Click the preview image to close
- Combination mode: Supports array configuration (e.g., `['mask','button']`)
- Default values:
  - ğŸ“± Pad side (touch screen devices with viewport < 1200px): `['mask','button']`
  - ğŸ’» PC side: `['mask','button','body']`

**`href`**: Link navigation

- When enabled, the component renders as an `<a>` tag
- Behavior: Clicking performs page navigation.

#### Mutually Exclusive Property Conflict

The `preview` and `href` properties **cannot be enabled simultaneously** (both would take over the click event).
</docs>
<script setup lang="ts">
import { reactive } from 'vue';
import { propsToAttrStr } from '../../../_demo/utils';
import { DocDemoSchema, DocDemoTemplate } from '../../../_demo/types';

const _schema = reactive({
  setRatio: {
    type: 'boolean',
    default: true,
  },
  height: {
    type: 'number',
    min: 50,
    max: 300,
    default: 200,
    step: 50,
    disabled: true as boolean,
    label: 'Height(px)',
  },
  ratio: {
    type: 'number',
    step: 0.1,
    min: 1,
    max: 2,
    default: 1.7,
    disabled: false as boolean,
  },
  fit: {
    type: 'list',
    list: ['cover', 'contain', 'fill', 'none', 'scale-down'],
    default: 'cover',
  },
  hoverable: {
    type: 'boolean',
  },
  preview: {
    type: 'boolean',
  },
  background: {
    type: 'boolean',
  },
  previewClose: {
    type: 'list',
    list: ['none', 'mask', 'button', 'body'],
    default: 'mask',
  },
  href: {
    type: 'boolean',
    label: 'Set href',
  },
}) satisfies Record<string, DocDemoSchema>;

const _template: DocDemoTemplate<typeof _schema> = (props) => {
  if (props.background) {
    _schema.fit.list = ['none', 'cover', 'contain', '80% auto'];
  } else {
    _schema.fit.list = ['cover', 'contain', 'fill', 'none', 'scale-down'];
  }
  const mutuallyExclusiveKeys = ['preview', 'href'] as const;
  const excludeProps: (keyof typeof _schema)[] = ['href', 'setRatio', 'height'];
  for (const key of mutuallyExclusiveKeys) {
    (_schema[key] as any).disabled = false;
    if (props[key]) {
      mutuallyExclusiveKeys.forEach((k) => {
        if (k !== key) {
          (_schema[k] as any).disabled = true;
          props[k] = false;
        }
      });
      break;
    }
  }
  let styleStr = '';
  if (props.setRatio) {
    _schema.ratio.disabled = false;
    _schema.height.disabled = true;
    styleStr = 'style="width: 100%;"';
  } else {
    _schema.ratio.disabled = true;
    _schema.height.disabled = false;
    excludeProps.push('ratio');
    styleStr = `style="height: ${props.height}px;`;
    if (props.background) {
      styleStr += ' width: 100%;';
    }
    styleStr += '"';
  }
  const hrefTemplate = props.href ? 'href="/" target="_blank"' : '';
  return `<OFigure ${hrefTemplate} src="/card-cover.jpg" ${propsToAttrStr(props, excludeProps)} ${styleStr} />`;
};

const _ctx = {};
</script>
